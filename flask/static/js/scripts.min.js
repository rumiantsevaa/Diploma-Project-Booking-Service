const bookBtns=document.querySelectorAll(".book-btn");async function book(o){o.preventDefault();const e=o.target,t=new FormData(e),n=await fetch(e.action,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();r.message?(alert(r.message),window.bookFormDialog.close()):alert(r.error||"Unknown error occurred")}bookBtns.forEach(o=>{o.addEventListener("click",o=>{const e=o.currentTarget.dataset.hotelId,t=o.currentTarget.dataset.hotelName;if(!window.bookFormDialog){const n=document.getElementById("booking-form-template").content.cloneNode(!0);document.body.appendChild(n),window.bookFormDialog=document.getElementById("booking-form-dialog")}window.bookFormDialog.showModal(),window.bookFormDialog.querySelector("#book-form").removeEventListener("submit",book),window.bookFormDialog.querySelector("#book-form").addEventListener("submit",book),window.bookFormDialog.querySelector('slot[name="hotel-name"]').textContent=t,window.bookFormDialog.querySelector("#hotel-id").value=e})});
